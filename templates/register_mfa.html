{% extends "base.html" %}
{% block title %}Konfiguracja MFA{% endblock %}

{% block content %}
<div class="container mt-5">
  <div class="card mx-auto" style="max-width: 450px;">
    <div class="card-body text-center">
      <h2>Skonfiguruj aplikację MFA</h2>
      <p class="mb-4">Zeskanuj ten kod QR w Google/Microsoft Authenticator, a następnie wpisz kod weryfikacyjny.</p>
      
      <img src="data:image/png;base64,{{ qr_b64 }}" class="img-fluid mb-3" alt="Kod QR">

      <form method="post">
        {{ form.hidden_tag() }}
        <div class="mb-3">
          {{ form.code(class="form-control text-center" + (" is-invalid" if form.code.errors else ""), placeholder="Kod 2FA") }}
          {% for err in form.code.errors %}
            <div class="invalid-feedback d-block">{{ err }}</div>
          {% endfor %}
        </div>
        {{ form.submit(class="btn btn-primary w-100") }}
      </form>
    </div>
  </div>
</div>
{% endblock %}
